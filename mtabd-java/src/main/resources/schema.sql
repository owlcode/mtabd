SET DB_CLOSE_DELAY -1;
;
CREATE USER IF NOT EXISTS SA SALT '7644d254fcf1ed32' HASH 'db125adb49c2032fb79d5730abcb264b57f3ae7b2ff485df15daaf52ffe76330' ADMIN;
CREATE SEQUENCE PUBLIC.HIBERNATE_SEQUENCE START WITH 4;
CREATE SEQUENCE PUBLIC.SYSTEM_SEQUENCE_A8B46FF2_4504_4AD7_9C9F_4F46314D55ED START WITH 6506 BELONGS_TO_TABLE;
CREATE MEMORY TABLE PUBLIC.CHAT(
    ID BIGINT NOT NULL,
    SERVICE_ID BIGINT
);
ALTER TABLE PUBLIC.CHAT ADD CONSTRAINT PUBLIC.CONSTRAINT_1 PRIMARY KEY(ID);
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.CHAT;
INSERT INTO PUBLIC.CHAT(ID, SERVICE_ID) VALUES
(100, NULL);
CREATE MEMORY TABLE PUBLIC.DICTIONARIES(
    ID BIGINT NOT NULL,
    NAME VARCHAR(255)
);
ALTER TABLE PUBLIC.DICTIONARIES ADD CONSTRAINT PUBLIC.CONSTRAINT_9 PRIMARY KEY(ID);
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.DICTIONARIES;
CREATE MEMORY TABLE PUBLIC.DICTIONARY_VALUES(
    ID BIGINT NOT NULL,
    LONG_NAME VARCHAR(255),
    NAME VARCHAR(255),
    DICT_ID BIGINT,
    TRANSLATION_ID BIGINT
);
ALTER TABLE PUBLIC.DICTIONARY_VALUES ADD CONSTRAINT PUBLIC.CONSTRAINT_F PRIMARY KEY(ID);
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.DICTIONARY_VALUES;
CREATE MEMORY TABLE PUBLIC.MESSAGES(
    ID BIGINT NOT NULL,
    CREATED_AT TIMESTAMP,
    IPV4 VARCHAR(255),
    TEXT VARCHAR(255) NOT NULL,
    USER_AGENT VARCHAR(255),
    USER_ID BIGINT,
    CHAT_ID BIGINT
);
ALTER TABLE PUBLIC.MESSAGES ADD CONSTRAINT PUBLIC.CONSTRAINT_13 PRIMARY KEY(ID);

CREATE MEMORY TABLE PUBLIC.PERFORMERS(
    ID BIGINT NOT NULL,
    AGE INTEGER,
    EMAIL VARCHAR(255),
    FIRST_NAME VARCHAR(255),
    LAST_NAME VARCHAR(255),
    USERNAME VARCHAR(255) NOT NULL
);
ALTER TABLE PUBLIC.PERFORMERS ADD CONSTRAINT PUBLIC.CONSTRAINT_95 PRIMARY KEY(ID);
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.PERFORMERS;
CREATE MEMORY TABLE PUBLIC.PRODUCTS(
    ID BIGINT NOT NULL,
    DESCRIPTION VARCHAR(255),
    NAME VARCHAR(255) NOT NULL,
    PRICE DECIMAL(19, 2)
);
ALTER TABLE PUBLIC.PRODUCTS ADD CONSTRAINT PUBLIC.CONSTRAINT_F2 PRIMARY KEY(ID);
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.PRODUCTS;
CREATE MEMORY TABLE PUBLIC.PRODUCTS_SERVICES(
    PRODUCT_ID BIGINT NOT NULL,
    SERVICES_ID BIGINT NOT NULL
);
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.PRODUCTS_SERVICES;
CREATE MEMORY TABLE PUBLIC.SERVICES(
    ID BIGINT NOT NULL,
    CREATED_AT TIMESTAMP,
    DESCRIPTION VARCHAR(255),
    FINISH_DATE TIMESTAMP,
    START_DATE TIMESTAMP,
    PERFORMER_ID BIGINT,
    USER_ID BIGINT
);
ALTER TABLE PUBLIC.SERVICES ADD CONSTRAINT PUBLIC.CONSTRAINT_8 PRIMARY KEY(ID);
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.SERVICES;
CREATE MEMORY TABLE PUBLIC.TRANSLATIONS(
    ID BIGINT NOT NULL,
    LANGUAGE VARCHAR(255)
);
ALTER TABLE PUBLIC.TRANSLATIONS ADD CONSTRAINT PUBLIC.CONSTRAINT_4 PRIMARY KEY(ID);
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.TRANSLATIONS;
CREATE MEMORY TABLE PUBLIC.USERS(
    ID BIGINT NOT NULL,
    BIRTH DATE,
    CREATED_AT TIMESTAMP,
    EMAIL VARCHAR(255),
    FIRST_NAME VARCHAR(255),
    LAST_NAME VARCHAR(255),
    PASSWORD VARCHAR(255),
    USERNAME VARCHAR(255) NOT NULL
);
ALTER TABLE PUBLIC.USERS ADD CONSTRAINT PUBLIC.CONSTRAINT_4D PRIMARY KEY(ID);

CREATE MEMORY TABLE PUBLIC.LOGGING_EVENT(
    TIMESTMP BIGINT NOT NULL SELECTIVITY 65,
    FORMATTED_MESSAGE LONGVARCHAR NOT NULL SELECTIVITY 62,
    LOGGER_NAME VARCHAR(256) NOT NULL SELECTIVITY 4,
    LEVEL_STRING VARCHAR(256) NOT NULL SELECTIVITY 1,
    THREAD_NAME VARCHAR(256) SELECTIVITY 1,
    REFERENCE_FLAG SMALLINT SELECTIVITY 1,
    ARG0 VARCHAR(256) SELECTIVITY 1,
    ARG1 VARCHAR(256) SELECTIVITY 1,
    ARG2 VARCHAR(256) SELECTIVITY 1,
    ARG3 VARCHAR(256) SELECTIVITY 1,
    CALLER_FILENAME VARCHAR(256) SELECTIVITY 5,
    CALLER_CLASS VARCHAR(256) SELECTIVITY 5,
    CALLER_METHOD VARCHAR(256) SELECTIVITY 7,
    CALLER_LINE CHAR(4) SELECTIVITY 9,
    EVENT_ID BIGINT DEFAULT (NEXT VALUE FOR PUBLIC.SYSTEM_SEQUENCE_A8B46FF2_4504_4AD7_9C9F_4F46314D55ED) NOT NULL NULL_TO_DEFAULT SEQUENCE PUBLIC.SYSTEM_SEQUENCE_A8B46FF2_4504_4AD7_9C9F_4F46314D55ED SELECTIVITY 100
);
ALTER TABLE PUBLIC.LOGGING_EVENT ADD CONSTRAINT PUBLIC.CONSTRAINT_7 PRIMARY KEY(EVENT_ID);
-- 6505 +/- SELECT COUNT(*) FROM PUBLIC.LOGGING_EVENT;

CREATE MEMORY TABLE PUBLIC.LOGGING_EVENT_PROPERTY(
    EVENT_ID BIGINT NOT NULL,
    MAPPED_KEY VARCHAR(254) NOT NULL,
    MAPPED_VALUE LONGVARCHAR
);
ALTER TABLE PUBLIC.LOGGING_EVENT_PROPERTY ADD CONSTRAINT PUBLIC.CONSTRAINT_3 PRIMARY KEY(EVENT_ID, MAPPED_KEY);
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.LOGGING_EVENT_PROPERTY;
CREATE MEMORY TABLE PUBLIC.LOGGING_EVENT_EXCEPTION(
    EVENT_ID BIGINT NOT NULL,
    I SMALLINT NOT NULL,
    TRACE_LINE VARCHAR(256) NOT NULL
);
ALTER TABLE PUBLIC.LOGGING_EVENT_EXCEPTION ADD CONSTRAINT PUBLIC.CONSTRAINT_1F PRIMARY KEY(EVENT_ID, I);
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.LOGGING_EVENT_EXCEPTION;
ALTER TABLE PUBLIC.USERS ADD CONSTRAINT PUBLIC.UK_R43AF9AP4EDM43MMTQ01ODDJ6 UNIQUE(USERNAME);
ALTER TABLE PUBLIC.PERFORMERS ADD CONSTRAINT PUBLIC.UK_6B1PHE7FDDV7JUN2V8T1FCD2M UNIQUE(USERNAME);
ALTER TABLE PUBLIC.LOGGING_EVENT_EXCEPTION ADD CONSTRAINT PUBLIC.CONSTRAINT_1F5 FOREIGN KEY(EVENT_ID) REFERENCES PUBLIC.LOGGING_EVENT(EVENT_ID) NOCHECK;
ALTER TABLE PUBLIC.MESSAGES ADD CONSTRAINT PUBLIC.FKPSMH6CLH3CSORW43EAODLQVKN FOREIGN KEY(USER_ID) REFERENCES PUBLIC.USERS(ID) NOCHECK;
ALTER TABLE PUBLIC.DICTIONARY_VALUES ADD CONSTRAINT PUBLIC.FK8TBEIL0VCYGNP71XCB7AI7ETC FOREIGN KEY(TRANSLATION_ID) REFERENCES PUBLIC.TRANSLATIONS(ID) NOCHECK;
ALTER TABLE PUBLIC.CHAT ADD CONSTRAINT PUBLIC.FKP10Y35MKOOT702ETAWMLPP2 FOREIGN KEY(SERVICE_ID) REFERENCES PUBLIC.SERVICES(ID) NOCHECK;
ALTER TABLE PUBLIC.MESSAGES ADD CONSTRAINT PUBLIC.FKDUMCU11XF8LDUN8I4XPD04J43 FOREIGN KEY(CHAT_ID) REFERENCES PUBLIC.CHAT(ID) NOCHECK;
ALTER TABLE PUBLIC.PRODUCTS_SERVICES ADD CONSTRAINT PUBLIC.FKYIKGKIXMIS9NQ9SSJBRR74BF FOREIGN KEY(PRODUCT_ID) REFERENCES PUBLIC.PRODUCTS(ID) NOCHECK;
ALTER TABLE PUBLIC.LOGGING_EVENT_PROPERTY ADD CONSTRAINT PUBLIC.CONSTRAINT_36 FOREIGN KEY(EVENT_ID) REFERENCES PUBLIC.LOGGING_EVENT(EVENT_ID) NOCHECK;
ALTER TABLE PUBLIC.PRODUCTS_SERVICES ADD CONSTRAINT PUBLIC.FK127M2192ORKD1J5DM81S81205 FOREIGN KEY(SERVICES_ID) REFERENCES PUBLIC.SERVICES(ID) NOCHECK;
ALTER TABLE PUBLIC.DICTIONARY_VALUES ADD CONSTRAINT PUBLIC.FKTJN8VV8XE96FLW2ETAWV9PCJK FOREIGN KEY(DICT_ID) REFERENCES PUBLIC.DICTIONARIES(ID) NOCHECK;
ALTER TABLE PUBLIC.SERVICES ADD CONSTRAINT PUBLIC.FKMAUQOBEWMD57YLQ7CK6WPRGKT FOREIGN KEY(USER_ID) REFERENCES PUBLIC.USERS(ID) NOCHECK;
ALTER TABLE PUBLIC.SERVICES ADD CONSTRAINT PUBLIC.FKM7SPWUSM1IU2RC2TDLUDOHYV1 FOREIGN KEY(PERFORMER_ID) REFERENCES PUBLIC.PERFORMERS(ID) NOCHECK;

DROP ALIAS IF EXISTS GET_USERNAMES;
CREATE ALIAS GET_USERNAMES AS '
String getUserNames(java.sql.Connection con) throws Exception {
   String ret = "[";
    java.sql.ResultSet rs = con.createStatement().executeQuery("SELECT * FROM USERS");
       while(rs.next())
       {
         ret += (rs.getString("FIRST_NAME") +" "+ rs.getString("LAST_NAME") + ",");
       }
ret = ret.substring(0, ret.length() - 1);
ret += "]";

    return ret;
}
';